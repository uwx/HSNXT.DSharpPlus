{"Name":"IsValidIranianSocialCode","Description":"بررسی اعتبار کد ملی","Author":"محمد مهدوی منش 09120611300","SubmittedOn":"1/14/2017 10:39:42 PM","Entries":["public static bool IsValidIranianSocialCode( this string codeMelli )\r\n        {\r\n\r\n            switch ( codeMelli )\r\n            {\r\n                case \"1111111111\":\r\n                case \"2222222222\":\r\n                case \"3333333333\":\r\n                case \"4444444444\":\r\n                case \"5555555555\":\r\n                case \"6666666666\":\r\n                case \"7777777777\":\r\n                case \"8888888888\":\r\n                case \"9999999999\":\r\n                case \"0000000000\":\r\n                return false;\r\n            }\r\n\r\n            long result;\r\n            if ( long.TryParse(codeMelli, out result) )\r\n            {\r\n                switch ( result.NoOfDigits() )\r\n                {\r\n                    // because in some cases user ignore the two starting zeros\r\n                    case 8:\r\n                    long.TryParse((string.Concat(\"00\", result.ToString())), out result);\r\n                    return result.CheckValidity();\r\n\r\n\r\n\r\n\r\n                    // because in some cases user ignore the first starting zero\r\n                    case 9:\r\n                    long.TryParse((string.Concat(\"0\", result.ToString())), out result);\r\n                    return result.CheckValidity();\r\n\r\n\r\n\r\n\r\n                    case 10:\r\n                    return result.CheckValidity();\r\n\r\n                    default: // below 8 digits is not valid Social No. Code\r\n                    return false;\r\n\r\n\r\n\r\n                }\r\n            }\r\n            else return false;\r\n\r\n        }\r\n\r\n        public static int NoOfDigits( this long input )\r\n        {\r\n            return input.ToString().Length;\r\n        }\r\n        public static bool CheckValidity( this long socialCode )\r\n        {\r\n\r\n            char[] splitSocialCode = socialCode.ToString().ToCharArray();\r\n            int sum = 0;\r\n            for ( int i = 0, j = 10; i < 9 & j > 1; sum += int.Parse(splitSocialCode[i++].ToString()) * j-- ) ;\r\n            int reminder = sum % 11;\r\n            if ( reminder < 2 )\r\n                return reminder == int.Parse(splitSocialCode[9].ToString()); // controlling digit\r\n            else\r\n                return (11 - reminder) == int.Parse(splitSocialCode[9].ToString());\r\n\r\n        }","Console.WriteLine(\"2300060647\".IsValidIranianSocialCode()); // true\r\n            Console.WriteLine(\"2300060648\".IsValidIranianSocialCode()); //false\r\n            Console.WriteLine(\"2222222222\".IsValidIranianSocialCode()); //false"]}