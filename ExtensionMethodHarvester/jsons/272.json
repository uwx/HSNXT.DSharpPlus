{"Name":"Chooser.ShowAsync()","Description":"Show Windows Phone Choosers using the async/await pattern instead of using the completed event.","Author":"Fons Sonnemans","SubmittedOn":"10/23/2013 2:13:37 PM","Entries":["public static Task<T> ShowAsync<T>(this ChooserBase<T> chooser)\r\n    where T : TaskEventArgs {\r\n\r\n    TaskCompletionSource<T> tcs = new TaskCompletionSource<T>();\r\n\r\n    EventHandler<T> handler = null;\r\n\r\n    handler = (s, e) => {\r\n        chooser.Completed -= handler;\r\n\r\n        if (e.Error != null)\r\n            tcs.SetException(e.Error);\r\n        else\r\n            tcs.SetResult(e);\r\n    };\r\n\r\n    chooser.Completed += handler;\r\n    chooser.Show();\r\n\r\n    return tcs.Task;\r\n}","private async void Button_Click(object sender, RoutedEventArgs e) {\r\n    try {\r\n        var c = new PhotoChooserTask();\r\n        var result = await c.ShowAsync();\r\n        var bi = new BitmapImage();\r\n        bi.SetSource(result.ChosenPhoto);\r\n        imagePhoto.Source = bi;\r\n    } catch (Exception ex) {\r\n        MessageBox.Show(ex.Message);\r\n    }\r\n}"]}